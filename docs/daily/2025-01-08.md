# 2025-01-05

## ğŸ“š ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©

- í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ repository êµ¬í˜„ì²´
- sealedë¡œ ë¬¶ì€ data classëŠ” ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©
    - ì—¬ëŸ¬ data classë¥¼ ê°€ì ¸ì•¼í•˜ëŠ” jsonParserë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©

```kotlin
sealed class Entities {}

@Serializable
data class Comment(val postId: Int, val id: Int, val name: String, val email: String, val body: String) :
    Entities() {}

interface MockCommentDatasourceImpl {
    suspend fun getComments(postId: Int): List<Comment>
}

interface CommentRepositoryImpl {
    suspend fun getComments(postId: Int): List<Comment>
}

interface CommentDataSource {
    var comments: List<Comment>
}

open class CommentDataSourceImpl(private val jsonDataSource: String) : CommentDataSource, CommentRepositoryImpl {
    override var comments: List<Comment> //  getterì—ì„œ commentë¼ëŠ” ë°ì´í„° ì†ŒìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤. 
        get() {
            return parseJson(jsonDataSource)
        }
        set(value) {}

    override suspend fun getComments(postId: Int): List<Comment> { // ìœ„ì— ë°›ì€ commentë¥¼ ê°€ì§€ê³  ì‹¤ì œ ë¡œì§ì„ êµ¬í˜„í•œë‹¤.
        return TODO()
    }
}


// ê·¸ëŸ¬ë©´ ì‹¤ì œë¡œ ì•„ë˜ì™€ ê°™ì´ repository ë§Œ ë‚¨ê²Œë˜ê³  êµ¬í˜„ì²´ëŠ” ìœ„ì— ë‹¤ ìˆë‹¤.
class CommentRepository : CommentDataSourceImpl(readJson(commentDataSource)) {}
```

- ìœ„ ì½”ë“œë¡œ ì¸í•œ ì¥ì ì€ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë‚´ê°€ ì›í•˜ëŠ” ê°€ì§œ ë°ì´í„°ë¥¼ ë„£ê³  ì„ì˜ì´ ë°ì´í„°ê°’ì„ ì§ê´€ì ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆë‹¤.

```kotlin
val emptyResult = CommentDataSourceImpl(emptyData).getComments(3)
val mockDataSourceResult = CommentDataSourceImpl(mockData).getComments(3)
val originDataSourceResult = CommentRepository().getComments(3)
```

- ë˜í•œ ì´ êµ¬í˜„ì²´ì—ì„œëŠ” ë¡œì»¬ì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ ë„£ì—ˆëŠ”ë° json í˜•ì‹ê³¼ interfaceë§Œ ë§ìœ¼ë©´ ì„œë²„ì—ì„œ ë°›ì€ ë‚´ìš©ìœ¼ë¡œ êµì²´í•´ë„ ì „í˜€ ë¬¸ì œê°€ ì—†ë‹¤.

## ê³ ë¯¼í•œì 

- ì§€ê¸ˆì€ CommentDataSourceImplë¥¼ ë§Œë“¤ì–´ì„œ CommentDataSourceë¥¼ ë„£ì—ˆëŠ”ë° ë°ì´í„° ì€ë‹‰ì´ ì•„ë‹ˆì§€ ì•Šì„ê¹Œ.. ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

## ğŸ“” íšŒê³ 

- ë¬´ì§€ì„±ìœ¼ë¡œ Repositoryë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.
- í™•ì¥ê°€ëŠ¥í•œ dataSourceë¥¼ interface êµ¬í˜„ì²´ë¥¼ ë”°ë¡œ ë‘ë©´ ë°ì´í„°ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ ë¼ìš¸ ìˆ˜ ìˆë‹¤.
- í˜„ì¬ ì§„í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¡œê·¸ë¥¼ ì°ê³  ë””ë²„ê¹…ì„ í•˜ëŠ”ë° ì¼ì • êµ¬ê°„ë³„ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¬ì–´ë†“ìœ¼ë©´ í›¨ì”¬ ì¶”ì ì´ ìš©ì´í•˜ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
- ë¡œì§ì†ì—ì„œ ì–´ë””ì„ ê°€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ê°‘ìê¸° ì½”ë“œìƒì˜ íë¦„ì´ ëˆê¸°ë©´ì„œ ë””ë²„ê¹… í•˜ê¸°ê°€ ì‰½ì§€ ì•Šì€ë° (í…ŒìŠ¤íŠ¸)í™•ì¥ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•˜í•˜ë©´ì„œ ë§Œë“¤ë©´ êµ‰ì¥íˆ ìœ ìš©í• ê±° ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.


