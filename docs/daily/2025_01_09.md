# 2025.01.09

## ğŸ“š ì˜¤ëŠ˜ ë°°ìš¸ ë‚´ìš©

# Kotlin DTO ë° Mapper ê´€ë ¨ ì •ë¦¬

## DTO ì‘ì„± ì´ìœ 

- JSON ë°ì´í„°ëŠ” ë¶ˆì™„ì „í•˜ê±°ë‚˜ `null` ê°’ì„ í¬í•¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ëª¨ë“  í•„ë“œë¥¼ nullableë¡œ ì²˜ë¦¬í•˜ì—¬ ì•ˆì „í•˜ê²Œ íŒŒì‹± ê°€ëŠ¥í•˜ë„ë¡ í•´ì•¼ í•¨.
- DTOëŠ” ë°ì´í„° ê³„ì¸µê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ ê°„ì˜ ëª…í™•í•œ ë°ì´í„° ì „ë‹¬ ê°ì²´ë¡œ ì‚¬ìš©ë¨.

## DTO í´ë˜ìŠ¤ ì‘ì„± ì˜ˆì‹œ

### ContentDto

`kotlinx.serialization`ì„ ì‚¬ìš©í•œ ì§ë ¬í™” ê°€ëŠ¥í•œ DTO í´ë˜ìŠ¤ ì˜ˆì‹œ:

```kotlin
import kotlinx.serialization.Serializable

@Serializable
data class ContentDto(
    val id: Int? = null,
    val type: String? = null,
    val title: String? = null,
    val content: String? = null,
    val url: String? = null,
    val caption: String? = null,
    val createdAt: String? = null
)
```

- **`@Serializable`**: Kotlinx Serializationì„ í™œì„±í™”í•˜ì—¬ JSON ì§ë ¬í™”/ì—­ì§ë ¬í™” ê°€ëŠ¥.
- **ê¸°ë³¸ê°’ ì„¤ì •**: ëª¨ë“  í•„ë“œë¥¼ `null`ë¡œ ì´ˆê¸°í™”í•˜ì—¬, JSON ë°ì´í„°ê°€ ë¹„ì–´ ìˆì–´ë„ ì—ëŸ¬ ë°©ì§€.

## ì§ë ¬í™” ë° ì—­ì§ë ¬í™” ì˜ˆì œ

```kotlin
import kotlinx.serialization.json.Json

fun main() {
    // JSON ë¬¸ìì—´ â†’ ê°ì²´ ë³€í™˜(ì—­ì§ë ¬í™”)
    val jsonString = """
        {
            "id": 1,
            "type": "article",
            "title": "This is an article",
            "content": "This is the content of the article.",
            "createdAt": "2020-01-01"
        }
    """
    val content = Json.decodeFromString<ContentDto>(jsonString)
    println(content)

    // ê°ì²´ â†’ JSON ë¬¸ìì—´ ë³€í™˜(ì§ë ¬í™”)
    val serializedJson = Json.encodeToString(content)
    println(serializedJson)
}
```

- **ì—­ì§ë ¬í™”**: JSON ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜.
- **ì§ë ¬í™”**: ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜.

## Mapper í™œìš©

- DTOë¥¼ Domain ê°ì²´ë¡œ ë³€í™˜í•˜ê±°ë‚˜ ê·¸ ë°˜ëŒ€ë¡œ ë³€í™˜í•  ë•Œ Mapperë¥¼ ì‚¬ìš©.
- ë³€í™˜ ë¡œì§ì„ í•œê³³ì— ëª¨ì•„ ê´€ë¦¬í•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ.

```kotlin
data class DomainModel(
    val id: Int,
    val title: String,
    val content: String
)

fun ContentDto.toDomainModel(): DomainModel? {
    return if (id != null && title != null && content != null) {
        DomainModel(
            id = id,
            title = title,
            content = content
        )
    } else {
        null
    }
}
```

- **Validation**: í•„ìˆ˜ í•„ë“œê°€ `null`ì´ ì•„ë‹ˆì–´ì•¼ ë³€í™˜ ê°€ëŠ¥.
- **Mapper í•¨ìˆ˜**: í™•ì¥ í•¨ìˆ˜ í˜•íƒœë¡œ êµ¬í˜„í•˜ì—¬ í˜¸ì¶œ ì‹œ ê°€ë…ì„± í–¥ìƒ.

## ì°¸ì¡°

- [DTO, Mapper](https://docs.google.com/presentation/d/1LyJhrq_BRJxb8bMeGs6rRn_9EfSCUHcy8ZsrbzPZi7s/edit#slide=id.g2da0f394d33_0_182)